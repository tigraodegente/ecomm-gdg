---
/**
 * Redirecionamento para a versão baseada em slug para evitar conteúdo duplicado
 * Esta página captura acessos pelo ID e redireciona para a versão canônica com slug
 */
import productService from "../../../services/productService";

// Obter o ID do produto da URL
const { id } = Astro.params;

// Buscar o produto pelo ID para obter o slug
// Certifique-se de usar false para bySlug, pois estamos buscando por ID
const product = productService.getProductById(id, false);

// Se o produto existir e tiver slug, redirecionar para a versão com slug
// Caso contrário, redirecionar para a página de produtos
if (product && product.slug) {
  return Astro.redirect(`/produto/${product.slug}`, 301); // 301 = redirecionamento permanente
} else {
  return Astro.redirect('/produtos', 302); // 302 = redirecionamento temporário
}
---